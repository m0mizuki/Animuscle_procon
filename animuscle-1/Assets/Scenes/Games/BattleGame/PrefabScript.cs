using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PrefabScript : MonoBehaviour
{

    [SerializeField]
    [Tooltip("?v???C???[???v???n?u????")]
    private GameObject enemyPrefab;


    public static int enemyQuantity = 0;
    int wave = 0;



    // ????????[]???E?F?[?u???A?????????G???^?C?v???????i???????????j
    // ?G???????????????????????A?o?????u???O???????????????w??
    int[][] enemyTable =
    {
        new int  []{0,1,0},   // ???P?E?F?[?u
        new int  []{1,0,2},   // ???Q?E?F?[?u
        new int  []{3,3,2},   // .....
        new int  []{0,4,0}
    };

   

    

    
    // Start is called before the first frame update
    void Start()
    {
        wave = -1;
        enemyQuantity = 0;
        

        

    }

    // Update is called once per frame
    void Update()
    {

    if (enemyQuantity == 0)
    {
        // ?G?????????????????????E?F?[?u?????s
        wave++;

        if (wave > 3)// ?E?F?[?u???J??????
            {
                wave = 0;
            }

        // ?E?F?[?u???R?????????????s??????
        for (int i = 0; i < 3; i++)
        {
            if (enemyTable[wave][i] != 0)
            {
                // playerPrefab?????V????GameObject??????
                GameObject newEnemyObj = Instantiate(enemyPrefab);

                // Canvas????????
                newEnemyObj.transform.SetParent(this.transform, false);

                // ?V?????I?u?W?F?N?g?????????O???^??????????
                // ?????????????????????h??
                newEnemyObj.name = enemyPrefab.name;

                // EnemyController?X?N???v?g??????
                EnemyController enemyController = newEnemyObj.GetComponent<EnemyController>();

                




                enemyController.Create(enemyTable[wave][i], i);
                
                enemyQuantity++;
            }



        }

        

        }





    }
}
